{% extends 'base.html' %}

{% block title %}<title>Проекты</title>{% endblock title %}

{% block content %}
    <br>
    <button class="orange-btn">Создать проект</button>

    <form method="POST"
          style="width: 60%; border: 2px solid orange; margin-top: 30px; margin-bottom: 30px; padding: 30px;">
        {% csrf_token %}

        <p>Предупреждение</p>
        <br>
        <p>Вы действительно хотите удалить проект 'наименование проекта'?</p>

        <input class="form-control" type="hidden" name="action" value="delete_project">
        <input class="form-control" type="hidden" name="project_id" value="9">

        <br>
        <button type="button" class="orange-btn">Отмена</button>
        <button type="submit" class="orange-btn">Да, удалить</button>
    </form>

    {% if managed_projects %}
        <p>Проекты, которыми Вы руководите:</p>
        {% for project in managed_projects %}
            <br>
            <div class="d-flex" style="border: 2px solid orange">
                <div class="d-flex flex-column -content-between">
                    <img src="{{ project.photo.url }}" width="300px" alt="Обложка проекта">
                    <button class="orange-btn">Изменить</button>
                    <button class="orange-btn">Удалить</button>
                </div>
                <div class=" d-flex flex-column">
                    <h1 class="text-center">{{ project.name }}</h1>
                    <h2 class="text-center">{{ project.deadline_str }}</h2>
                    <div class="text-center">
                        {% if project.technical_task %}
                            <a href="{{ project.technical_task.url }}" target="_blank">Техническое задание</a>
                        {% endif %}
                    </div>
                    <p class="text-justify" style="margin-top: 10px">{{ project.description }}</p>
                    <div class="d-flex" style="margin-top: 10px">
                        <p>Руководитель проекта</p>
                        <a href="{% url 'profile' project.manager.id %}" target="_blank"><img
                                src="{{ project.manager.cropped_photo.url }}"
                                width="50px"
                                style="border: 2px solid orange; border-radius: 50%;"></a>
                    </div>
                    <div class="d-flex">
                        {% if project.team %}
                            <p>Команда</p>
                            {% for member in project.team.members.all %}
                                <a href="{% url 'profile' member.id %}" target="_blank"><img
                                        src="{{ member.cropped_photo.url }}"
                                        width="50px"
                                        style="border: 2px solid orange; border-radius: 50%;"></a>
                            {% endfor %}
                        {% endif %}
                    </div>
                </div>
            </div>
        {% endfor %}
    {% else %}
        <p class="fs-4 text-center mt-4">К сожалению, Вы еще не руководите ни одним проектом. Хотите создать новый
            проект?</p>
    {% endif %}

    <br>

    {% if others_projects %}
        <p>Проекты, в которых вы участвуете:</p>
        {% for project in others_projects %}
            <br>
            <div class="d-flex" style="border: 2px solid orange">
                <div class="d-flex flex-column -content-between">
                    <img src="{{ project.photo.url }}" width="300px" alt="Обложка проекта">
                </div>
                <div class=" d-flex flex-column">
                    <h1 class="text-center">{{ project.name }}</h1>
                    <h2 class="text-center">{{ project.deadline_str }}</h2>
                    <div class="text-center">
                        {% if project.technical_task %}
                            <a href="{{ project.technical_task.url }}" target="_blank">Техническое задание</a>
                        {% endif %}
                    </div>
                    <p class="text-justify" style="margin-top: 10px">{{ project.description }}</p>
                    <div class="d-flex" style="margin-top: 10px">
                        <p>Руководитель проекта</p>
                        <a href="{% url 'profile' project.manager.id %}" target="_blank"><img
                                src="{{ project.manager.cropped_photo.url }}"
                                width="50px"
                                style="border: 2px solid orange; border-radius: 50%;"></a>
                    </div>
                    <div class="d-flex">
                        {% if project.team %}
                            <p>Команда</p>
                            {% for member in project.team.members.all %}
                                <a href="{% url 'profile' member.id %}" target="_blank"><img
                                        src="{{ member.cropped_photo.url }}"
                                        width="50px"
                                        style="border: 2px solid orange; border-radius: 50%;"></a>
                            {% endfor %}
                        {% endif %}
                    </div>
                </div>
            </div>
        {% endfor %}
    {% else %}
        <p class="fs-4 text-center mt-4">К сожалению, Вы еще не участвуете ни одном в проекте. Хотите создать новый
            проект?</p>
    {% endif %}
{% endblock content %}